import{d as w,e as b,j as t,L as S,B as N,f as $,r as c}from"./index-961c2349.js";import{T as R,a as L,R as F,b as D,I as E,S as _,c as I,d as U,e as v}from"./SearchUsers.styled-4f81a59a.js";function f(s){return s.charAt(0).toUpperCase()+s.slice(1)}const B=({users:s,visibleColumns:i,switchAccess:g})=>{const l=e=>{const n=new Date("2023-11-10T14:58:20.594Z"),a=String(n.getDate()).padStart(2,"0"),o=String(n.getMonth()+1).padStart(2,"0"),x=n.getFullYear();return`${a}.${o}.${x}`},d=w(),[r,{isLoading:h}]=b(),m=async e=>{console.log("ID:",e),r(e).unwrap().then(()=>{d("/admin/users")}).catch(n=>console.log(n.data.message))};return t.jsx(t.Fragment,{children:t.jsxs(R,{children:[t.jsx("thead",{children:t.jsx(L,{children:i.map((e,n,a)=>t.jsx(F,{isFirstColumn:n===0,isLastColumn:n===a.length-1,children:e.label},e.key))})}),t.jsx("tbody",{children:s.map((e,n)=>t.jsx(L,{children:i.map((a,o,x)=>t.jsx(D,{isFirstColumn:o===0,isLastColumn:o===x.length-1,children:a.type==="date"?l(e[a.key]):a.type==="name"?e.name?e.name:f(e.firstName)+" "+f(e.lastName):a.type==="nameLink"?e.name?t.jsx(S,{to:`/admin/users/carduser/${e._id}`,children:e.name}):t.jsx(S,{to:`/admin/users/carduser/${e._id}`,children:`${f(e.firstName)} ${f(e.lastName)}`}):a.type==="link"?t.jsx(S,{to:`/admin/users/carduser/${e._id}`,children:"картка"}):a.type==="nameLinkEditor"?t.jsx(S,{to:`/admin/users/cardeditor/${e._id}`,children:`${e.firstName} ${e.lastName}`}):a.key==="access"?t.jsx(N,{isTrue:e[a.key],idUser:e._id}):a.key==="status"?t.jsx(t.Fragment,{children:e[a.key]===!0?"Відкрито":"Заблоковано"}):a.key==="sendEmail"?t.jsx($,{type:"button",text:"Відправити",padding:"8px",fontsize:"14px",onClick:()=>m(e._id),display:"none"}):e[a.key]},a.key))},n))})]})})},z=({onSearchTermChange:s,pageType:i})=>{const[g,l]=c.useState(""),d=r=>{const h=r.target.value;l(h),s(h)};return t.jsx(t.Fragment,{children:t.jsx(E,{pageType:i,type:"text",placeholder:"Пошук користувачів",value:g,onChange:d})})},Y=({dataUsers:s,isLoading:i,titleDefault:g,visibleColumns:l,pageType:d})=>{const[r,h]=c.useState(""),[m,e]=c.useState([]),[n,a]=c.useState(!1),o=r.trim()!=="",x=p=>{h(p)},y=o?(m.length>0,"Результати пошуку:"):g;return c.useEffect(()=>{e(s)},[s]),c.useEffect(()=>{if(r.trim()!==""){const p=s.filter(j=>{var C,T,k,u;return((C=j.name)==null?void 0:C.toLowerCase().includes(r.toLowerCase()))||((T=j.firstName)==null?void 0:T.toLowerCase().includes(r.toLowerCase()))||((k=j.lastName)==null?void 0:k.toLowerCase().includes(r.toLowerCase()))||((u=j.contractNumber)==null?void 0:u.toLowerCase().includes(r.toLowerCase()))});e(p),a(p.length===0)}else e(s),a(!1)},[r,s]),t.jsxs(t.Fragment,{children:[t.jsxs(_,{children:[t.jsx(I,{children:y}),t.jsx(z,{onSearchTermChange:x,pageType:d})]}),i?t.jsx(U,{children:"Завантаження..."}):m.length===0&&n?t.jsx(t.Fragment,{children:t.jsx(v,{children:" не знайдено"})}):t.jsx(B,{users:m,visibleColumns:l})]})};export{Y as S};
