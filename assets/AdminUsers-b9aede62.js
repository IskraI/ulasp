import{j as a,R as z,o as x,p,q as h,s as m,t as G,v as f,w as v,x as y,B as H,F as J,y as K,z as Q,A as V,C as X,D as Y,G as S,r as j,H as Z,I as _,J as aa,K as ea,g as ta,M as sa,U as ca,N as U,O,P as ia,Q as la,V as na,W as da,X as oa,Y as ma,T as xa,Z as ha,_ as pa,$ as r,a0 as ua,a1 as ja}from"./index-87a87074.js";const Na=({register:c,errors:e,margintop:n,control:s,dirtyFields:i})=>a.jsxs(z,{margintop:n,children:[a.jsxs(x,{children:[a.jsx(p,{children:"Контактна особа* "}),a.jsx(h,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${e.contactFace?"invalid":""}${!e.contactFace&&i.contactFace?"valid":""}`,...c("contactFace")}),a.jsxs(m,{id:"contactFaceTooltip",className:`${e.contactFace?"visible":""}`,children:[" ",e.contactFace&&e.contactFace.message]})]}),a.jsxs(x,{children:[a.jsx(p,{children:"Ідентифікаційний номер* "}),a.jsx(h,{type:"text",placeholder:"Ідентифікаційний номер","aria-describedby":"contactFaceTaxCodeTooltip",className:`${e.contactFaceTaxCode?"invalid":""}${!e.contactFaceTaxCode&&i.contactFaceTaxCode?"valid":""}`,...c("contactFaceTaxCode")}),a.jsxs(m,{id:"contactFaceTaxCodeTooltip",className:`${e.contactFaceTaxCode?"visible":""}`,children:[" ",e.contactFaceTaxCode&&e.contactFaceTaxCode.message]})]}),a.jsxs(x,{children:[a.jsx(p,{children:"Номер телефону* "}),a.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${e.contactFaceTelNumber?"invalid":""}${!e.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...c("contactFaceTelNumber")}),a.jsxs(m,{id:"contactFaceTelNumberTooltip",className:`${e.contactFaceTelNumber?"visible":""}`,children:[" ",e.contactFaceTelNumber&&e.contactFaceTelNumber.message]}),a.jsx("p",{})]}),a.jsxs(x,{children:[a.jsx(p,{children:"E-mail "}),a.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${e.contactFaceEmail?"invalid":""}${!e.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...c("contactFaceEmail")}),a.jsxs(m,{id:"contactFaceEmailTooltip",className:`${e.contactFaceEmail?"visible":""}`,children:[" ",e.contactFaceEmail&&e.contactFaceEmail.message]})]})]}),ba=({register:c,errors:e,typeOfUser:n,typeOfStatus:s,handleTypeOfStatus:i,isValid:d,activeSection:t,dirtyFields:l})=>a.jsxs(G,{children:[n==="fop"||t==="MusicEditor"?a.jsxs(a.Fragment,{children:[a.jsxs(f,{children:[a.jsx(v,{children:"Прізвище"}),a.jsx(y,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${e.lastName?"invalid":""}${!e.lastName&&l.lastName?"valid":""}`,...c("lastName")}),a.jsx(m,{id:"lastNameTooltip",className:`${e.lastName?"visible":""}`,children:e.lastName&&e.lastName.message})]}),a.jsxs(f,{children:[a.jsx(v,{children:"Ім'я"}),a.jsx(y,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${e.firstName?"invalid":""}${!e.firstName&&l.firstName?"valid":""}`,...c("firstName")}),a.jsx(m,{id:"firstNameTooltip",className:`${e.firstName?"visible":""}`,children:e.firstName&&e.firstName.message})]}),a.jsxs(f,{children:[a.jsx(v,{children:"По-батькові"}),a.jsx(y,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${e.fatherName?"invalid":""}${!e.fatherName&&l.fatherName?"valid":""}`,...c("fatherName")}),a.jsx(m,{id:"firstNameTooltip",className:`${e.fatherName?"visible":""}`,children:e.fatherName&&e.fatherName.message})]})]}):a.jsxs(f,{children:[a.jsx(v,{children:"Назва компанії"}),a.jsx(y,{type:"text",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${e.name?"invalid":""}${!e.name&&l.name?"valid":""}`,...c("name")}),"  ",a.jsx(m,{id:"firstNameTooltip",className:`${e.name?"visible":""}`,children:e.name&&e.name.message})]}),a.jsx(H,{type:"button",isTrue:s,onClick:()=>i(),form:!0})]}),E=({dirtyFields:c,control:e,isValid:n,errors:s,register:i,typeOfUser:d})=>a.jsxs(a.Fragment,{children:[a.jsxs(x,{children:[a.jsx(p,{children:"Код ЄДРПОУ (ІНН)*"}),a.jsx(h,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${s.taxCode?"invalid":""}${!s.taxCode&&c.taxCode?"valid":""}`,...i("taxCode")}),a.jsx(m,{id:"taxCodeTooltip",className:`${s.taxCode?"visible":""}`,children:s.taxCode&&s.taxCode.message})]}),d==="fop"&&a.jsxs(x,{children:[a.jsx(p,{children:"Дата народження"}),a.jsx(h,{type:"text",placeholder:"Дата народження","aria-describedby":"dayOfBirthdayTooltip",className:`${s.dayOfBirthday?"invalid":""}${!s.dayOfBirthday&&c.dayOfBirthday?"valid":""}`,...i("dayOfBirthday")}),a.jsx(m,{id:"dayOfBirthdayTooltip",className:`${s.dayOfBirthday?"visible":""}`,children:s.dayOfBirthday&&s.dayOfBirthday.message})]}),a.jsxs(x,{children:[a.jsx(p,{children:"Номер телефону*"}),a.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${s.telNumber?"invalid":""}${!s.telNumber&&c.telNumber?"valid":""}`,...i("telNumber")}),a.jsx(m,{id:"telNumberTooltip",className:`${s.telNumber?"visible":""}`,children:s.telNumber&&s.telNumber.message})]}),a.jsxs(x,{children:[a.jsx(p,{children:"E-mail*"}),a.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${s.email?"invalid":""}${!s.email&&c.email?"valid":""}`,...i("email")})," ",a.jsx(m,{id:"emailTooltip",className:`${s.email?"visible":""}`,children:s.email&&s.email.message})]})]}),fa=({control:c,handleTypeOfStatus:e,activeSection:n,typeOfStatus:s,typeOfUser:i,isValid:d,errors:t,register:l,dirtyFields:o})=>(console.log("errors",t),console.log("isValid",d),console.log("dirtyFields.dateOfAccess && errors.dateOfAccess",o.dateOfAccess&&t.dateOfAccess),a.jsxs(J,{children:[a.jsxs(K,{children:[a.jsx(ba,{handleTypeOfStatus:e,register:l,errors:t,typeOfUser:i,typeOfStatus:s,isValid:d,activeSection:n,dirtyFields:o}),n==="User"&&a.jsxs(a.Fragment,{children:[a.jsxs(x,{children:[a.jsx(p,{children:"№ договору"}),a.jsx(h,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${t.contractNumber?"invalid":""}${!t.contractNumber&&o.contractNumber?"valid":""}`,...l("contractNumber")}),a.jsx(m,{id:"contractNumberTooltip",className:`${t.contractNumber?"visible":""}`,children:t.contractNumber&&t.contractNumber.message})]}),a.jsx(E,{typeOfUser:i,register:l,control:c,isValid:d,errors:t,readOnly:"false",dirtyFields:o}),a.jsxs(x,{children:[a.jsx(p,{children:"Надання доступу до*"}),a.jsx(h,{type:"text",placeholder:"Надання доступу до","aria-describedby":"dateOfAccessTooltip",className:`${t.dateOfAccess?"invalid":""}${!t.dateOfAccess&&o.dateOfAccess?"valid":""}`,...l("dateOfAccess")}),a.jsx(m,{id:"dateOfAccessTooltip",className:`${t.dateOfAccess?"visible":""}`,children:t.dateOfAccess&&t.dateOfAccess.message})]}),a.jsxs(x,{children:[a.jsx(p,{children:"Остання оплата* "}),a.jsx(h,{type:"text",placeholder:"Остання оплата","aria-describedby":"lastPayTooltip",className:`${t.lastPay?"invalid":""}${!t.lastPay&&o.lastPay?"valid":""}`,...l("lastPay")}),a.jsx(m,{id:"lastPayTooltip",className:`${t.lastPay?"visible":""}`,children:t.lastPay&&t.lastPay.message})]}),a.jsx(Na,{control:c,register:l,errors:t,margintop:"36px",isValid:d,dirtyFields:o})]}),n==="MusicEditor"&&a.jsxs(a.Fragment,{children:[a.jsx(E,{typeOfUser:"fop",register:l,control:c,isValid:d,errors:t,readOnly:"false",dirtyFields:o}),a.jsx(x,{children:a.jsx(h,{type:"text",placeholder:"Логін",valid:`${t.login?"invalid":""}${!t.login&&o.login?"valid":""}`,...l("login")})}),a.jsx(x,{children:a.jsx(h,{type:"text",placeholder:"Пароль",valid:`${t.password?"invalid":""}${!t.password&&o.password?"valid":""}`,...l("password")})})]})]}),a.jsxs(Q,{children:[a.jsxs(V,{children:[a.jsx(X,{children:"Примітка "}),a.jsx(Y,{type:"text",placeholder:"Примітка",...l("comment")})]}),a.jsx(S,{type:"submit",padding:"8px",text:"Додати",disabled:!d||o.dateOfAccess&&t.dateOfAccess,showIcon:!1})]})]})),va=({onCloseModal:c,section:e})=>{const[n,s]=j.useState(e),[i,d]=j.useState(!1),[t,l]=j.useState("fop"),[o,{isLoading:T}]=Z(),[A,{isLoading:ya}]=_(),[M,{isLoading:Ta}]=aa(),$=ea();let B=n==="MusicEditor"?la:t==="fop"?na:da;const{control:w,register:R,handleSubmit:L,setError:$a,clearErrors:ga,reset:g,setValue:Ca,formState:{errors:k,isValid:P,dirtyFields:I}}=ta({mode:"onChange",resolver:sa(B)}),D=()=>{d(i!==!0)},W=b=>{if(n==="MusicEditor"){const N={...b,editorRole:!0,status:!0};M(N).unwrap().then(()=>{$("/admin/users/editors"),c()}).catch(u=>{var F;return((F=u==null?void 0:u.data)==null?void 0:F.message)&&alert(u.data.message)});return}if(t==="fop"){const N={...b,access:i,userFop:t};o(N).unwrap().then(()=>{$("/admin/users/allusers"),c()}).catch(u=>alert(u.data.message))}if(t==="tov"){const N={...b,access:i,userFop:t};console.log(N),A(N).unwrap().then(()=>{$("/admin/users"),c()}).catch(u=>console.log(u.data))}},C=b=>{s(b),g()},q=()=>{l(t==="tov"?"fop":"tov"),g()};return console.log("activeSection",n),a.jsxs(ca,{children:[a.jsxs(U,{children:[a.jsx(O,{isActive:n==="User",onClick:()=>C("User"),children:"Новий користувач"}),a.jsx(O,{isActive:n==="MusicEditor",onClick:()=>C("MusicEditor"),children:"Музичний редактор"})]}),n==="User"&&a.jsx(ia,{type:"button",onClick:q,children:t==="tov"?"ТОВ":"ФОП"}),a.jsx("form",{onSubmit:L(W),children:a.jsx(fa,{control:w,handleTypeOfStatus:D,typeOfStatus:i,register:R,isValid:P,errors:k,activeSection:n,typeOfUser:t,dirtyFields:I})})]})},Oa=()=>{const[c,e]=j.useState(""),[n,s]=j.useState(!1),[i,d]=j.useState("User"),t=oa();j.useEffect(()=>{const T=t.pathname.split("/").pop();T==="allusers"?d("User"):T==="editors"&&d("MusicEditor")},[t.pathname]);const l=()=>{s(!0)},o=()=>{s(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs(ma,{children:[a.jsx(xa,{children:"Користувачі"}),a.jsx(S,{showIcon:!0,icon:`${ha}#icon-plus`,type:"button",padding:"12px 46px",onClick:l,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"Додати користувача"}),a.jsx(pa,{})]}),a.jsxs(U,{children:[a.jsx(r,{to:"allusers",activeclassname:i==="User"?"active":"",onClick:()=>d("User"),children:"Усі користувачі"}),a.jsx(r,{to:"editors",activeclassname:i==="MusicEditor"?"active":"",onClick:()=>{d("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),a.jsx(ua,{searchTerm:c}),n&&a.jsx(ja,{width:"898px",padding:"24px",onClose:o,showCloseButton:!0,children:a.jsx(va,{onCloseModal:o,section:i})})]})};export{Oa as default};
