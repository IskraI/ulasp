import{n as f,r as p,a as A,j as e,F as I,R as k,b as P,d as $,e as l,f as i,g as o,C as q,h as D,i as V,k as K,l as W,B as E,m as Z,o as z,p as G,q as H,s as J,U as Q,S as O,t as U,v as X,w as Y,x as _,y as ee,N as B,O as te}from"./index-1f18c80d.js";import{S as se,I as ae}from"./SearchUsers.styled-a7a643c8.js";import{T as le}from"./AdminCabinetPage.styled-63212998.js";const ne=f.div`
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: rgba(0, 0, 0, 0.5);
`,ce=f.div`
  width: ${a=>a.width};
  padding: ${a=>a.padding};
  border-radius: 15px;
  background: #7f99c0;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
`,ie=f.button`
  position: absolute;
  top: 24px;
  right: 24px;
  border: none;
  background: none;
  cursor: pointer;
`,oe=a=>f(a)`
  width: 24px;
  height: 24px;
`,de=a=>p.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...a},p.createElement("path",{d:"M6.4 19L5 17.6L10.6 12L5 6.4L6.4 5L12 10.6L17.6 5L19 6.4L13.4 12L19 17.6L17.6 19L12 13.4L6.4 19Z",fill:"#17161C"})),xe=document.querySelector("#modal-root"),he=oe(de),re=({width:a,padding:n,bcgTransparent:c,showCloseButton:d,children:r,onClose:h})=>{p.useEffect(()=>{const m=u=>{u.code==="Escape"&&h()};return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}},[h]);const x=m=>{m.currentTarget===m.target&&h()},t={display:d?"block":"none"},s={backgroundColor:c?"rgba(0, 0, 0, 0)":"rgba(18, 20, 23, 0.5)"};return A.createPortal(e.jsx(ne,{onClick:x,style:s,children:e.jsxs(ce,{width:a,padding:n,children:[e.jsx(ie,{onClick:h,style:t,children:e.jsx(he,{})}),r]})}),xe)},pe=({user:a,control:n,handleTypeOfStatus:c,activeSection:d,typeOfStatus:r,typeOfUser:h,isValid:x,errors:t,register:s})=>(console.log("activeSection",d),e.jsxs(I,{children:[d==="User"&&e.jsxs(k,{children:[e.jsxs(P,{children:[e.jsx($,{}),e.jsxs(l,{children:[e.jsx(i,{children:"№ договору"}),e.jsx(o,{type:"text",placeholder:"№ договору",...s("contractNumber")}),e.jsx("p",{children:t.contractNumber&&t.contractNumber.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Код ЄДРПОУ (ІНН)*"}),e.jsx(o,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)",...s("taxCode")}),e.jsx("p",{children:t.taxCode&&t.taxCode.message})]}),h==="fop"&&e.jsxs(l,{children:[e.jsx(i,{children:"Дата народження"}),e.jsx(o,{type:"text",placeholder:"Дата народження",...s("dayOfBirthday")}),e.jsx("p",{children:t.dayOfBirthday&&t.dayOfBirthday.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Номер телефону*"}),e.jsx(o,{type:"text",placeholder:"Номер телефону",...s("telNumber")}),console.log("errors",t),e.jsx("p",{children:t.telNumber&&t.telNumber.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"E-mail*"}),e.jsx(o,{type:"text",placeholder:"E-mail",...s("email")}),e.jsx("p",{children:t.email&&t.email.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Надання доступу до*"}),e.jsx(o,{type:"text",placeholder:"Надання доступу до",...s("dateOfAccess")}),e.jsx("p",{children:t.dateOfAccess&&t.dateOfAccess.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Остання оплата* "}),e.jsx(o,{type:"text",placeholder:"Остання оплата",...s("lastPay")}),e.jsx("p",{children:t.lastPay&&t.lastPay.message})]}),e.jsx(q,{control:n,register:s,errors:t,margintop:"36px"}),e.jsx(e.Fragment,{})]}),e.jsxs(D,{children:[e.jsxs(V,{children:[e.jsx(K,{children:"Примітка "}),e.jsx(W,{type:"text",placeholder:"Примітка",...s("comment")}),e.jsx("p",{children:t.comment&&t.comment.message})]}),e.jsx(E,{type:"submit",padding:"8px",text:"Додати"})]})]}),d==="MusicEditor"&&e.jsxs("div",{children:[e.jsxs(k,{children:[e.jsxs(Z,{children:[e.jsxs(l,{children:[e.jsx("label",{children:"Прізвище"}),e.jsx("input",{type:"text",placeholder:"Прізвище",...s("lastName")}),e.jsx("p",{children:t.lastName&&t.lastName.message})]}),e.jsxs(l,{children:[e.jsx("label",{children:"Ім'я"}),e.jsx("input",{type:"text",placeholder:"Ім'я",...s("firstName")}),e.jsx("p",{children:t.firstName&&t.firstName.message})]}),e.jsxs(l,{children:[e.jsx("label",{children:"По-батькові"}),e.jsx("input",{type:"text",placeholder:"По-батькові",...s("fatherName")}),e.jsx("p",{children:t.fatherName&&t.fatherName.message})]})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Ідентифікаційний номер*"}),e.jsx(o,{type:"text",placeholder:"234567891",...s("taxCode")}),e.jsx("p",{children:t.taxCode&&t.taxCode.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Дата народження"}),e.jsx(o,{type:"text",placeholder:"Дата народження",...s("dayOfBirthday")}),e.jsx("p",{children:t.dayOfBirthday&&t.dayOfBirthday.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"Номер телефону*"}),e.jsx(o,{type:"text",placeholder:"Номер телефону",...s("telNumber")}),console.log("errors",t),e.jsx("p",{children:t.telNumber&&t.telNumber.message})]}),e.jsxs(l,{children:[e.jsx(i,{children:"E-mail*"}),e.jsx(o,{type:"text",placeholder:"E-mail",...s("email")}),e.jsx("p",{children:t.email&&t.email.message})]})]}),e.jsxs(l,{children:[e.jsx("label",{children:"Примітка "}),e.jsx("textarea",{type:"text",placeholder:"Примітка",...s("comment")}),e.jsx("p",{children:t.comment&&t.comment.message})]})]})]})),me=({onCloseModal:a,typeOfPage:n})=>{const[c,d]=p.useState("User"),[r,h]=p.useState(!1),[x,t]=p.useState("fop"),[s,{isLoading:m}]=z(),[u,{isLoading:je}]=G(),g=H(),{control:C,register:w,handleSubmit:M,setError:ue,clearErrors:S,formState:{errors:v,isValid:N,dirtyFields:ye}}=J({mode:"onChange",resolver:_(ee)}),F=()=>{h(r!==!0),S()};console.log("typeOfPage",n);const R=()=>{t(x==="tov"?"fop":"tov")},T=b=>{const y={...b,status:r,userFop:x};console.log(y),x==="fop"&&s(y).unwrap().then(()=>{g("/admin/users"),a()}).catch(j=>console.log(j.data.message)),x==="tov"&&u(y).unwrap().then(()=>{g("/admin/users"),a()}).catch(j=>console.log(j.data)),c==="MusicEditor"&&u(y).unwrap().then(()=>{g("/admin/editor"),a()}).catch(j=>console.log(j.data))},L=b=>{d(b),S()};return e.jsxs(Q,{children:[e.jsxs(O,{children:[e.jsx(U,{isActive:c==="User",onClick:()=>L("User"),children:"Новий користувач"}),e.jsx(U,{isActive:c==="MusicEditor",onClick:()=>L("MusicEditor"),children:"Музичний редактор"})]}),c==="User"&&n==="modal"&&e.jsx(X,{type:"button",onClick:R,children:x==="tov"?"ТОВ":"ФОП"}),e.jsxs("form",{onSubmit:M(T),children:[n==="modal"&&e.jsx(Y,{control:C,handleTypeOfStatus:F,typeOfStatus:r,register:w,isValid:N,errors:v,activeSection:c,typeOfUser:x}),n==="card"&&e.jsx(pe,{control:C,handleTypeOfStatus:F,typeOfStatus:r,register:w,isValid:N,errors:v,activeSection:c,typeOfUser:x})]})]})},Ce=()=>{const[a,n]=p.useState(!1),c=()=>{n(!0)},d=()=>{n(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(se,{children:[e.jsx(le,{children:"Користувачі"}),e.jsx(E,{type:"button",padding:"12px 46px",onClick:c,text:"Додати",ariaLabel:"  Додати користувача"}),e.jsx(ae,{type:"text",id:"search",name:"search",placeholder:"Пошук користувача"})]}),e.jsxs(O,{children:[e.jsx(B,{to:"allusers",children:"Усі користувачі"}),e.jsx(B,{to:"editors",children:"Музичні редактори та адміністратори"})]}),e.jsx(te,{}),a&&e.jsx(re,{width:"898px",padding:"24px",onClose:d,showCloseButton:!0,children:e.jsx(me,{onCloseModal:d,typeOfPage:"modal"})})]})};export{Ce as default};
