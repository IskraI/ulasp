import{j as a,R as q,o,p,q as m,s as d,t as z,v as f,w as v,x as y,B as G,F as H,y as J,z as K,A as Q,C as V,D as W,f as E,r as u,E as X,G as Y,H as Z,d as _,a as aa,U as ea,S as O,I as C,J as ta,K as sa,M as ca,N as ia,O as la,P as na,T as da,Q as oa,V as ma,W as xa}from"./index-988bb4b9.js";import{U as ha,I as pa,L as g}from"./SearchUsers.styled-497c03f7.js";const ja=({register:c,errors:e,margintop:l,control:s,dirtyFields:i})=>a.jsxs(q,{margintop:l,children:[a.jsxs(o,{children:[a.jsx(p,{children:"Контактна особа* "}),a.jsx(m,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${e.contactFace?"invalid":""}${!e.contactFace&&i.contactFace?"valid":""}`,...c("contactFace")}),a.jsxs(d,{id:"contactFaceTooltip",className:`${e.contactFace?"visible":""}`,children:[" ",e.contactFace&&e.contactFace.message]})]}),a.jsxs(o,{children:[a.jsx(p,{children:"Ідентифікаційний номер* "}),a.jsx(m,{type:"text",placeholder:"Ідентифікаційний номер","aria-describedby":"contactFaceTaxCodeTooltip",className:`${e.contactFaceTaxCode?"invalid":""}${!e.contactFaceTaxCode&&i.contactFaceTaxCode?"valid":""}`,...c("contactFaceTaxCode")}),a.jsxs(d,{id:"contactFaceTaxCodeTooltip",className:`${e.contactFaceTaxCode?"visible":""}`,children:[" ",e.contactFaceTaxCode&&e.contactFaceTaxCode.message]})]}),a.jsxs(o,{children:[a.jsx(p,{children:"Номер телефону* "}),a.jsx(m,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${e.contactFaceTelNumber?"invalid":""}${!e.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...c("contactFaceTelNumber")}),a.jsxs(d,{id:"contactFaceTelNumberTooltip",className:`${e.contactFaceTelNumber?"visible":""}`,children:[" ",e.contactFaceTelNumber&&e.contactFaceTelNumber.message]}),a.jsx("p",{})]}),a.jsxs(o,{children:[a.jsx(p,{children:"E-mail "}),a.jsx(m,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${e.contactFaceEmail?"invalid":""}${!e.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...c("contactFaceEmail")}),a.jsxs(d,{id:"contactFaceEmailTooltip",className:`${e.contactFaceEmail?"visible":""}`,children:[" ",e.contactFaceEmail&&e.contactFaceEmail.message]})]})]}),ua=({register:c,errors:e,typeOfUser:l,typeOfStatus:s,handleTypeOfStatus:i,isValid:x,activeSection:t,dirtyFields:n})=>a.jsxs(z,{children:[l==="fop"||t==="MusicEditor"?a.jsxs(a.Fragment,{children:[a.jsxs(f,{children:[a.jsx(v,{children:"Прізвище"}),a.jsx(y,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${e.lastName?"invalid":""}${!e.lastName&&n.lastName?"valid":""}`,...c("lastName")}),a.jsx(d,{id:"lastNameTooltip",className:`${e.lastName?"visible":""}`,children:e.lastName&&e.lastName.message})]}),a.jsxs(f,{children:[a.jsx(v,{children:"Ім'я"}),a.jsx(y,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${e.firstName?"invalid":""}${!e.firstName&&n.firstName?"valid":""}`,...c("firstName")}),a.jsx(d,{id:"firstNameTooltip",className:`${e.firstName?"visible":""}`,children:e.firstName&&e.firstName.message})]}),a.jsxs(f,{children:[a.jsx(v,{children:"По-батькові"}),a.jsx(y,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${e.fatherName?"invalid":""}${!e.fatherName&&n.fatherName?"valid":""}`,...c("fatherName")}),a.jsx(d,{id:"firstNameTooltip",className:`${e.fatherName?"visible":""}`,children:e.fatherName&&e.fatherName.message})]})]}):a.jsxs(f,{children:[a.jsx(v,{children:"Назва компанії"}),a.jsx(y,{type:"text",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${e.name?"invalid":""}${!e.name&&n.name?"valid":""}`,...c("name")}),"  ",a.jsx(d,{id:"firstNameTooltip",className:`${e.name?"visible":""}`,children:e.name&&e.name.message})]}),a.jsx(G,{type:"button",isTrue:s,onClick:()=>i(),form:!0})]}),r=({dirtyFields:c,control:e,isValid:l,errors:s,register:i,typeOfUser:x})=>a.jsxs(a.Fragment,{children:[a.jsxs(o,{children:[a.jsx(p,{children:"Код ЄДРПОУ (ІНН)*"}),a.jsx(m,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${s.taxCode?"invalid":""}${!s.taxCode&&c.taxCode?"valid":""}`,...i("taxCode")}),a.jsx(d,{id:"taxCodeTooltip",className:`${s.taxCode?"visible":""}`,children:s.taxCode&&s.taxCode.message})]}),x==="fop"&&a.jsxs(o,{children:[a.jsx(p,{children:"Дата народження"}),a.jsx(m,{type:"text",placeholder:"Дата народження","aria-describedby":"dayOfBirthdayTooltip",className:`${s.dayOfBirthday?"invalid":""}${!s.dayOfBirthday&&c.dayOfBirthday?"valid":""}`,...i("dayOfBirthday")}),a.jsx(d,{id:"dayOfBirthdayTooltip",className:`${s.dayOfBirthday?"visible":""}`,children:s.dayOfBirthday&&s.dayOfBirthday.message})]}),a.jsxs(o,{children:[a.jsx(p,{children:"Номер телефону*"}),a.jsx(m,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${s.telNumber?"invalid":""}${!s.telNumber&&c.telNumber?"valid":""}`,...i("telNumber")}),a.jsx(d,{id:"telNumberTooltip",className:`${s.telNumber?"visible":""}`,children:s.telNumber&&s.telNumber.message})]}),a.jsxs(o,{children:[a.jsx(p,{children:"E-mail*"}),a.jsx(m,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${s.email?"invalid":""}${!s.email&&c.email?"valid":""}`,...i("email")})," ",a.jsx(d,{id:"emailTooltip",className:`${s.email?"visible":""}`,children:s.email&&s.email.message})]})]}),Na=({control:c,handleTypeOfStatus:e,activeSection:l,typeOfStatus:s,typeOfUser:i,isValid:x,errors:t,register:n,dirtyFields:h})=>a.jsxs(H,{children:[a.jsxs(J,{children:[a.jsx(ua,{handleTypeOfStatus:e,register:n,errors:t,typeOfUser:i,typeOfStatus:s,isValid:x,activeSection:l,dirtyFields:h}),l==="User"&&a.jsxs(a.Fragment,{children:[a.jsxs(o,{children:[a.jsx(p,{children:"№ договору"}),a.jsx(m,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${t.contractNumber?"invalid":""}${!t.contractNumber&&h.contractNumber?"valid":""}`,...n("contractNumber")}),a.jsx(d,{id:"contractNumberTooltip",className:`${t.contractNumber?"visible":""}`,children:t.contractNumber&&t.contractNumber.message})]}),a.jsx(r,{typeOfUser:i,register:n,control:c,isValid:x,errors:t,readOnly:"false",dirtyFields:h}),a.jsxs(o,{children:[a.jsx(p,{children:"Надання доступу до*"}),a.jsx(m,{type:"text",placeholder:"Надання доступу до","aria-describedby":"dateOfAccessTooltip",className:`${t.dateOfAccess?"invalid":""}${!t.dateOfAccess&&h.dateOfAccess?"valid":""}`,...n("dateOfAccess")}),a.jsx(d,{id:"dateOfAccessTooltip",className:`${t.dateOfAccess?"visible":""}`,children:t.dateOfAccess&&t.dateOfAccess.message})]}),a.jsxs(o,{children:[a.jsx(p,{children:"Остання оплата* "}),a.jsx(m,{type:"text",placeholder:"Остання оплата","aria-describedby":"lastPayTooltip",className:`${t.lastPay?"invalid":""}${!t.lastPay&&h.lastPay?"valid":""}`,...n("lastPay")}),a.jsx(d,{id:"lastPayTooltip",className:`${t.lastPay?"visible":""}`,children:t.lastPay&&t.lastPay.message})]}),a.jsx(ja,{control:c,register:n,errors:t,margintop:"36px",isValid:x,dirtyFields:h})]}),l==="MusicEditor"&&a.jsxs(a.Fragment,{children:[a.jsx(r,{typeOfUser:"fop",register:n,control:c,isValid:x,errors:t,readOnly:"false",dirtyFields:h}),a.jsx(o,{children:a.jsx(m,{type:"text",placeholder:"Логін",valid:`${t.login?"invalid":""}${!t.login&&h.login?"valid":""}`,...n("login")})}),a.jsx(o,{children:a.jsx(m,{type:"text",placeholder:"Пароль",valid:`${t.password?"invalid":""}${!t.password&&h.password?"valid":""}`,...n("password")})})]})]}),a.jsxs(K,{children:[a.jsxs(Q,{children:[a.jsx(V,{children:"Примітка "}),a.jsx(W,{type:"text",placeholder:"Примітка",...n("comment")})]}),a.jsx(E,{type:"submit",padding:"8px",text:"Додати"})]})]}),ba=({onCloseModal:c,section:e})=>{const[l,s]=u.useState(e),[i,x]=u.useState(!1),[t,n]=u.useState("fop"),[h,{isLoading:fa}]=X(),[U,{isLoading:va}]=Y(),[S,{isLoading:ya}]=Z(),T=_();let M=l==="MusicEditor"?ca:t==="fop"?ia:la;const{control:B,register:A,handleSubmit:R,setError:Ta,clearErrors:$a,reset:$,formState:{errors:w,isValid:L,dirtyFields:k}}=aa({mode:"onChange",resolver:sa(M)}),P=()=>{x(i!==!0)},I=N=>{if(l==="MusicEditor"){const j={...N,editorRole:!0,status:!1};S(j).unwrap().then(()=>{T("/admin/users/editors"),c()}).catch(b=>console.log(b.data))}if(t==="fop"){const j={...N,access:i,userFop:t};h(j).unwrap().then(()=>{T("/admin/users/allusers"),c()}).catch(b=>console.log(b.data.message))}if(t==="tov"){const j={...N,access:i,userFop:t};console.log(j),U(j).unwrap().then(()=>{T("/admin/users"),c()}).catch(b=>console.log(b.data))}},F=N=>{s(N),$()},D=()=>{n(t==="tov"?"fop":"tov"),$()};return console.log("activeSection",l),a.jsxs(ea,{children:[a.jsxs(O,{children:[a.jsx(C,{isActive:l==="User",onClick:()=>F("User"),children:"Новий користувач"}),a.jsx(C,{isActive:l==="MusicEditor",onClick:()=>F("MusicEditor"),children:"Музичний редактор"})]}),l==="User"&&a.jsx(ta,{type:"button",onClick:D,children:t==="tov"?"ТОВ":"ФОП"}),a.jsx("form",{onSubmit:R(I),children:a.jsx(Na,{control:B,handleTypeOfStatus:P,typeOfStatus:i,register:A,isValid:L,errors:w,activeSection:l,typeOfUser:t,dirtyFields:k})})]})},ga=()=>{const[c,e]=u.useState(!1),[l,s]=u.useState("User"),i=na();u.useEffect(()=>{const n=i.pathname.split("/").pop();n==="allusers"?s("User"):n==="editors"&&s("MusicEditor")},[i.pathname]);const x=()=>{e(!0)},t=()=>{e(!1)};return a.jsxs(a.Fragment,{children:[a.jsxs(ha,{children:[a.jsx(da,{children:"Користувачі"}),a.jsx(E,{icon:`${oa}#icon-plus`,type:"button",padding:"12px 46px",onClick:x,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"  Додати користувача"}),a.jsx(pa,{type:"text",id:"search",name:"search",placeholder:"Пошук користувача"})]}),a.jsxs(O,{children:[a.jsx(g,{to:"allusers",activeclassname:l==="User"?"active":"",onClick:()=>s("User"),children:"Усі користувачі"}),a.jsx(g,{to:"editors",activeclassname:l==="MusicEditor"?"active":"",onClick:()=>{s("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),a.jsx(ma,{}),c&&a.jsx(xa,{width:"898px",padding:"24px",onClose:t,showCloseButton:!0,children:a.jsx(ba,{onCloseModal:t,section:l})})]})};export{ga as default};
