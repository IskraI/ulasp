import{j as e,R as ae,q as m,s as p,t as h,v as o,w as se,x as C,y as $,z as y,B as te,F as ce,A as ie,C as le,D as R,G as ne,H as oe,I as de,J as me,K as F,r as N,M as xe,N as pe,O as he,P as ue,g as je,Q as Ne,U as be,V as I,W as L,X as fe,Y as A,Z as k,_ as ve,$ as re,a0 as ge,a1 as Te,a2 as Ce,a3 as $e,T as ye,a4 as Fe,a5 as Me,a6 as B,a7 as Ee}from"./index-3bf19b77.js";const we=({register:d,errors:t,margintop:s,control:c,dirtyFields:i})=>e.jsxs(ae,{margintop:s,children:[e.jsxs(m,{children:[e.jsx(p,{children:"Контактна особа* "}),e.jsx(h,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${t.contactFace?"invalid":""}${!t.contactFace&&i.contactFace?"valid":""}`,...d("contactFace")}),e.jsxs(o,{id:"contactFaceTooltip",className:`${t.contactFace?"visible":""}`,children:[" ",t.contactFace&&t.contactFace.message]})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Ідентифікаційний номер* "}),e.jsx(h,{type:"text",placeholder:"Ідентифікаційний номер","aria-describedby":"contactFaceTaxCodeTooltip",className:`${t.contactFaceTaxCode?"invalid":""}${!t.contactFaceTaxCode&&i.contactFaceTaxCode?"valid":""}`,...d("contactFaceTaxCode")}),e.jsxs(o,{id:"contactFaceTaxCodeTooltip",className:`${t.contactFaceTaxCode?"visible":""}`,children:[" ",t.contactFaceTaxCode&&t.contactFaceTaxCode.message]})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Номер телефону* "}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${t.contactFaceTelNumber?"invalid":""}${!t.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...d("contactFaceTelNumber")}),e.jsxs(o,{id:"contactFaceTelNumberTooltip",className:`${t.contactFaceTelNumber?"visible":""}`,children:[" ",t.contactFaceTelNumber&&t.contactFaceTelNumber.message]}),e.jsx("p",{})]}),e.jsxs(m,{children:[e.jsx(p,{children:"E-mail "}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${t.contactFaceEmail?"invalid":""}${!t.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...d("contactFaceEmail")}),e.jsxs(o,{id:"contactFaceEmailTooltip",className:`${t.contactFaceEmail?"visible":""}`,children:[" ",t.contactFaceEmail&&t.contactFaceEmail.message]})]})]}),Ae=({form:d,register:t,errors:s,typeOfUser:c,typeOfStatus:i,handleTypeOfAccess:u,isValid:l,activeSection:a,dirtyFields:n})=>e.jsxs(se,{children:[c==="fop"||a==="MusicEditor"?e.jsxs(e.Fragment,{children:[e.jsxs(C,{children:[e.jsx($,{children:"Прізвище"}),e.jsx(y,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${s.lastName?"invalid":""}${!s.lastName&&n.lastName?"valid":""}`,...t("lastName")}),e.jsx(o,{id:"lastNameTooltip",className:`${s.lastName?"visible":""}`,children:s.lastName&&s.lastName.message})]}),e.jsxs(C,{children:[e.jsx($,{children:"Ім'я"}),e.jsx(y,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${s.firstName?"invalid":""}${!s.firstName&&n.firstName?"valid":""}`,...t("firstName")}),e.jsx(o,{id:"firstNameTooltip",className:`${s.firstName?"visible":""}`,children:s.firstName&&s.firstName.message})]}),e.jsxs(C,{children:[e.jsx($,{children:"По-батькові"}),e.jsx(y,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${s.fatherName?"invalid":""}${!s.fatherName&&n.fatherName?"valid":""}`,...t("fatherName")}),e.jsx(o,{id:"firstNameTooltip",className:`${s.fatherName?"visible":""}`,children:s.fatherName&&s.fatherName.message})]})]}):e.jsxs(C,{children:[e.jsx($,{children:"Назва компанії"}),e.jsx(y,{type:"text",width:"100%",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${s.name?"invalid":""}${!s.name&&n.name?"valid":""}`,...t("name")})," ",e.jsx(o,{id:"firstNameTooltip",className:`${s.name?"visible":""}`,children:s.name&&s.name.message})]}),e.jsx(te,{type:"button",isTrue:i,handleTypeOfAccess:u,form:!0})]}),P=({dirtyFields:d,control:t,isValid:s,errors:c,register:i,typeOfUser:u})=>e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"Код ЄДРПОУ (ІНН)*"}),e.jsx(h,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${c.taxCode?"invalid":""}${!c.taxCode&&d.taxCode?"valid":""}`,...i("taxCode")}),e.jsx(o,{id:"taxCodeTooltip",className:`${c.taxCode?"visible":""}`,children:c.taxCode&&c.taxCode.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Назва закладу"}),e.jsx(h,{type:"text",placeholder:"Назва закладу","aria-describedby":"institutionTooltip",className:`${c.institution?"invalid":""}${!c.institution&&d.institution?"valid":""}`,...i("institution")}),e.jsx(o,{id:"institutionTooltip",className:`${c.institution?"visible":""}`,children:c.institution&&c.institution.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Номер телефону*"}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${c.telNumber?"invalid":""}${!c.telNumber&&d.telNumber?"valid":""}`,...i("telNumber")}),e.jsx(o,{id:"telNumberTooltip",className:`${c.telNumber?"visible":""}`,children:c.telNumber&&c.telNumber.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"E-mail*"}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${c.email?"invalid":""}${!c.email&&d.email?"valid":""}`,...i("email")})," ",e.jsx(o,{id:"emailTooltip",className:`${c.email?"visible":""}`,children:c.email&&c.email.message})]})]}),Ue=({form:d,control:t,handleTypeOfAccess:s,activeSection:c,typeOfStatus:i,typeOfUser:u,isValid:l,errors:a,register:n,dirtyFields:x})=>e.jsxs(ce,{children:[e.jsxs(ie,{children:[e.jsx(Ae,{form:d,handleTypeOfAccess:s,register:n,errors:a,typeOfUser:u,typeOfStatus:i,isValid:l,activeSection:c,dirtyFields:x}),c==="User"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"№ договору"}),e.jsx(h,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${a.contractNumber?"invalid":""}${!a.contractNumber&&x.contractNumber?"valid":""}`,...n("contractNumber")}),e.jsx(o,{id:"contractNumberTooltip",className:`${a.contractNumber?"visible":""}`,children:a.contractNumber&&a.contractNumber.message})]}),e.jsx(P,{typeOfUser:u,register:n,control:t,isValid:l,errors:a,readOnly:"false",dirtyFields:x}),e.jsxs(m,{children:[e.jsx(p,{children:"Надання доступу до*"}),e.jsx(h,{type:"text",placeholder:"Надання доступу до","aria-describedby":"dateOfAccessTooltip",className:`${a.dateOfAccess?"invalid":""}${!a.dateOfAccess&&x.dateOfAccess?"valid":""}`,...n("dateOfAccess")}),e.jsx(o,{id:"dateOfAccessTooltip",className:`${a.dateOfAccess?"visible":""}`,children:a.dateOfAccess&&a.dateOfAccess.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Остання оплата* "}),e.jsx(h,{type:"text",placeholder:"Остання оплата","aria-describedby":"lastPayTooltip",className:`${a.lastPay?"invalid":""}${!a.lastPay&&x.lastPay?"valid":""}`,...n("lastPay")}),e.jsx(o,{id:"lastPayTooltip",className:`${a.lastPay?"visible":""}`,children:a.lastPay&&a.lastPay.message})]}),e.jsx(we,{control:t,register:n,errors:a,margintop:"36px",isValid:l,dirtyFields:x})]}),c==="MusicEditor"&&e.jsxs(e.Fragment,{children:[e.jsx(P,{typeOfUser:"fop",register:n,control:t,isValid:l,errors:a,readOnly:"false",dirtyFields:x}),e.jsxs(le,{children:[e.jsxs(m,{children:[e.jsx(R,{type:"text",placeholder:"Логін","aria-describedby":"loginTooltip",className:`${a.login?"invalid":""}${!a.login&&x.login?"valid":""}`,...n("login")}),e.jsx(o,{id:"loginTooltip",className:`${a.login?"visible":""}`,children:a.login&&a.login.message})]}),e.jsxs(m,{children:[e.jsx(R,{type:"text",placeholder:"Пароль","aria-describedby":"passwordTooltip",className:`${a.password?"invalid":""}${!a.password&&x.password?"valid":""}`,...n("password")}),e.jsx(o,{id:"passwordTooltip",className:`${a.password?"visible":""}`,children:a.password&&a.password.message})]})]})]})]}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:"Примітка "}),e.jsx(me,{type:"text",placeholder:"Примітка",...n("comment")})]}),e.jsx(F,{type:"submit",padding:"8px",text:"Додати",disabled:!l||x.dateOfAccess&&a.dateOfAccess,showIcon:!1})]})]}),Se=({onCloseModal:d,section:t})=>{const[s,c]=N.useState(t),[i,u]=N.useState(!1),[l,a]=N.useState("fop"),[n,{isLoading:x}]=xe(),[D,{isLoading:Oe}]=pe(),[W,{isLoading:Re}]=he(),M=ue();let q=s==="MusicEditor"?re:l==="fop"?ge:Te;const{control:z,register:G,handleSubmit:H,reset:E,formState:{errors:J,isValid:K,dirtyFields:Q}}=je({mode:"onChange",resolver:Ne(q)}),[U,T]=N.useState(null),[X,w]=N.useState(""),f=b=>{T(b)},Y=()=>{T(null)},Z=()=>{E(),T(null)},S=()=>{d(),T(null)},_=()=>{u(i!==!0)},V=b=>{if(s==="MusicEditor"){const v={...b,editorRole:!0,status:!0,access:i};W(v).unwrap().then(()=>{M("/admin/users/editors"),f("successAdd")}).catch(r=>{var j;let g=(j=r.data)==null?void 0:j.message;w(g),f("error")});return}if(l==="fop"){const v={...b,access:i,userFop:l};n(v).unwrap().then(()=>{f("successAdd"),M("/admin/users/allusers")}).catch(r=>{var j;let g=(j=r.data)==null?void 0:j.message;w(g),f("error")})}if(l==="tov"){const v={...b,access:i,userFop:l};D(v).unwrap().then(()=>{M("/admin/users/allusers"),f("successAdd")}).catch(r=>{var j;let g=(j=r.data)==null?void 0:j.message;w(g),f("error")})}},O=b=>{c(b),E()},ee=()=>{a(l==="tov"?"fop":"tov"),E()};return e.jsxs(e.Fragment,{children:[e.jsxs(be,{children:[e.jsxs(I,{children:[e.jsx(L,{isActive:s==="User",onClick:()=>O("User"),children:"Новий користувач"}),e.jsx(L,{isActive:s==="MusicEditor",onClick:()=>O("MusicEditor"),children:"Музичний редактор"})]}),s==="User"&&e.jsx(fe,{type:"button",onClick:ee,children:l==="tov"?"ТОВ":"ФОП"}),e.jsx("form",{onSubmit:H(V),children:e.jsx(Ue,{control:z,handleTypeOfAccess:_,typeOfStatus:i,register:G,isValid:K,errors:J,activeSection:s,typeOfUser:l,dirtyFields:Q})})]}),U==="successAdd"&&e.jsxs(A,{width:"664px",padding:"138px 138px 74px",onClose:S,showCloseButton:!0,flexDirection:"column",children:[e.jsx(k,{children:"Новий користувач успішно додан"}),e.jsxs(ve,{children:[e.jsx(F,{type:"button",padding:"8px 37px",height:"48px",text:"Готово",showIcon:!1,onClick:S}),e.jsx(F,{type:"button",padding:"8px 44px",height:"48px",text:"Додати ще",showIcon:!1,marginleft:"31px",onClick:Z})]})]}),U==="error"&&e.jsx(A,{width:"520px",padding:"24px",onClose:Y,showCloseButton:!0,children:e.jsxs(k,{children:[" ",X]})})]})},ke=()=>{const[d,t]=N.useState(!1),[s,c]=N.useState("User"),i=Ce();N.useEffect(()=>{const a=i.pathname.split("/").pop();a==="allusers"?c("User"):a==="editors"&&c("MusicEditor")},[i.pathname]);const u=()=>{t(!0),document.body.classList.add("modal-open")},l=()=>{document.body.classList.remove("modal-open"),t(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs($e,{children:[e.jsx(ye,{children:"Користувачі"}),e.jsx(F,{showIcon:!0,icon:`${Fe}#icon-plus`,type:"button",padding:"12px 46px",onClick:u,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"Додати користувача"}),e.jsx(Me,{})]}),e.jsxs(I,{children:[e.jsx(B,{to:"allusers",activeclassname:s==="User"?"active":"",onClick:()=>c("User"),children:"Усі користувачі"}),e.jsx(B,{to:"editors",activeclassname:s==="MusicEditor"?"active":"",onClick:()=>{c("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),e.jsx(Ee,{}),d&&e.jsx(A,{width:"898px",padding:"24px",onClose:l,showCloseButton:!0,children:e.jsx(Se,{onCloseModal:l,section:s})})]})};export{ke as default};
