import{j as e,G as ce,H as m,I as h,J as j,K as o,N as ie,O as T,P as $,Q as F,U as le,r,V as ne,W as oe,X as de,Y as me,Z as xe,_ as pe,$ as he,a0 as V,a1 as ue,a2 as re,a3 as je,a4 as Ne,B as M,a5 as be,a6 as ge,a7 as fe,a8 as ve,g as Ce,a9 as ye,aa as Te,ab as K,ac as W,ad as $e,M as L,k as G,ae as Fe,af as Me,ag as Ee,ah as we,ai as Se,aj as Ue,T as Ae,ak as Oe,al as Le,am as H,an as Re}from"./index-04b567d7.js";const ke=({register:d,errors:c,margintop:s,control:t,dirtyFields:i})=>e.jsxs(ce,{margintop:s,children:[e.jsxs(m,{children:[e.jsx(h,{children:"Контактна особа "}),e.jsx(j,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${c.contactFace?"invalid":""}${!c.contactFace&&i.contactFace?"valid":""}`,...d("contactFace")}),e.jsxs(o,{id:"contactFaceTooltip",className:`${c.contactFace?"visible":""}`,children:[" ",c.contactFace&&c.contactFace.message]})]}),e.jsxs(m,{children:[e.jsx(h,{children:"Номер телефону "}),e.jsx(j,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${c.contactFaceTelNumber?"invalid":""}${!c.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...d("contactFaceTelNumber")}),e.jsxs(o,{id:"contactFaceTelNumberTooltip",className:`${c.contactFaceTelNumber?"visible":""}`,children:[" ",c.contactFaceTelNumber&&c.contactFaceTelNumber.message]}),e.jsx("p",{})]}),e.jsxs(m,{children:[e.jsx(h,{children:"E-mail "}),e.jsx(j,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${c.contactFaceEmail?"invalid":""}${!c.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...d("contactFaceEmail")}),e.jsxs(o,{id:"contactFaceEmailTooltip",className:`${c.contactFaceEmail?"visible":""}`,children:[" ",c.contactFaceEmail&&c.contactFaceEmail.message]})]})]}),Be=({form:d,register:c,errors:s,typeOfUser:t,typeOfStatus:i,handleTypeOfAccess:u,isValid:l,activeSection:a,dirtyFields:n})=>e.jsxs(ie,{children:[t==="fop"||a==="MusicEditor"?e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsx($,{children:"Прізвище"}),e.jsx(F,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${s.lastName?"invalid":""}${!s.lastName&&n.lastName?"valid":""}`,...c("lastName")}),e.jsx(o,{id:"lastNameTooltip",className:`${s.lastName?"visible":""}`,children:s.lastName&&s.lastName.message})]}),e.jsxs(T,{children:[e.jsx($,{children:"Ім'я"}),e.jsx(F,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${s.firstName?"invalid":""}${!s.firstName&&n.firstName?"valid":""}`,...c("firstName")}),e.jsx(o,{id:"firstNameTooltip",className:`${s.firstName?"visible":""}`,children:s.firstName&&s.firstName.message})]}),e.jsxs(T,{children:[e.jsx($,{children:"По-батькові"}),e.jsx(F,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${s.fatherName?"invalid":""}${!s.fatherName&&n.fatherName?"valid":""}`,...c("fatherName")}),e.jsx(o,{id:"firstNameTooltip",className:`${s.fatherName?"visible":""}`,children:s.fatherName&&s.fatherName.message})]})]}):e.jsxs(T,{children:[e.jsx($,{children:"Назва компанії"}),e.jsx(F,{type:"text",width:"100%",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${s.name?"invalid":""}${!s.name&&n.name?"valid":""}`,...c("name")})," ",e.jsx(o,{id:"firstNameTooltip",className:`${s.name?"visible":""}`,children:s.name&&s.name.message})]}),e.jsx(le,{type:"button",isTrue:i,handleTypeOfAccess:u,form:!0})]}),J=({dirtyFields:d,control:c,isValid:s,errors:t,register:i,typeOfUser:u,editor:l})=>e.jsxs(e.Fragment,{children:[!l&&e.jsxs(m,{children:[e.jsx(h,{children:"Код ЄДРПОУ (ІНН)*"}),e.jsx(j,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${t.taxCode?"invalid":""}${!t.taxCode&&d.taxCode?"valid":""}`,...i("taxCode")}),e.jsx(o,{id:"taxCodeTooltip",className:`${t.taxCode?"visible":""}`,children:t.taxCode&&t.taxCode.message})]}),!l&&e.jsxs(m,{children:[e.jsx(h,{children:"Назва закладу"}),e.jsx(j,{type:"text",placeholder:"Назва закладу","aria-describedby":"institutionTooltip",className:`${t.institution?"invalid":""}${!t.institution&&d.institution?"valid":""}`,...i("institution")}),e.jsx(o,{id:"institutionTooltip",className:`${t.institution?"visible":""}`,children:t.institution&&t.institution.message})]}),e.jsxs(m,{children:[e.jsx(h,{children:"Номер телефону*"}),e.jsx(j,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${t.telNumber?"invalid":""}${!t.telNumber&&d.telNumber?"valid":""}`,...i("telNumber")}),e.jsx(o,{id:"telNumberTooltip",className:`${t.telNumber?"visible":""}`,children:t.telNumber&&t.telNumber.message})]}),e.jsxs(m,{children:[e.jsx(h,{children:"E-mail*"}),e.jsx(j,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${t.email?"invalid":""}${!t.email&&d.email?"valid":""}`,...i("email")})," ",e.jsx(o,{id:"emailTooltip",className:`${t.email?"visible":""}`,children:t.email&&t.email.message})]})]}),De=({form:d,control:c,handleTypeOfAccess:s,activeSection:t,typeOfStatus:i,typeOfUser:u,isValid:l,errors:a,register:n,dirtyFields:x})=>{const[E,w]=r.useState(""),S=new Date;return e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(Be,{form:d,handleTypeOfAccess:s,register:n,errors:a,typeOfUser:u,typeOfStatus:i,isValid:l,activeSection:t,dirtyFields:x}),t==="User"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx(h,{children:"№ договору*"}),e.jsx(j,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${a.contractNumberDoc?"invalid":""}${!a.contractNumberDoc&&x.contractNumberDoc?"valid":""}`,...n("contractNumberDoc")}),e.jsx(o,{id:"contractNumberTooltip",className:`${a.contractNumberDoc?"visible":""}`,children:a.contractNumber&&a.contractNumber.message})]}),e.jsxs(m,{children:[e.jsx(h,{children:"№ договору (логін)*"}),e.jsx(j,{type:"text",placeholder:"№ договору логін","aria-describedby":"contractNumberLoginTooltip",className:`${a.contractNumber?"invalid":""}${!a.contractNumber&&x.contractNumber?"valid":""}`,...n("contractNumber")}),e.jsx(o,{id:"contractNumberTooltip",className:`${a.contractNumber?"visible":""}`,children:a.contractNumber&&a.contractNumber.message})]}),e.jsx(J,{typeOfUser:u,register:n,control:c,isValid:l,errors:a,readOnly:"false",dirtyFields:x}),e.jsxs(m,{children:[e.jsx(h,{children:"Дата договору"}),e.jsx(de,{name:"dateOfAccess",control:c,render:({field:U})=>e.jsxs(e.Fragment,{children:[e.jsx(me,{wrapperClassName:"datePicker",todayButton:"Сьогодні",selected:E||"",dateFormat:"dd.MM.yyyy",maxDate:S,locale:xe,onChange:g=>{g?(U.onChange(pe(g,"dd.MM.yyyy")),w(g)):(U.onChange(""),w(null))},placeholderText:"Оберіть дату",className:`date ${a.dateOfAccess?"invalid":""}${!a.dateOfAccess&&x.dateOfAccess?"valid":""}`}),a&&a.dateOfAccess&&e.jsx(o,{className:`${a.dateOfAccess?"visible":""}`,children:a.dateOfAccess.message})]})})]}),e.jsx(ke,{control:c,register:n,errors:a,margintop:"36px",isValid:l,dirtyFields:x})]}),t==="MusicEditor"&&e.jsxs(e.Fragment,{children:[e.jsx(J,{typeOfUser:"fop",register:n,control:c,isValid:l,errors:a,readOnly:"false",dirtyFields:x,editor:!0}),e.jsxs(he,{children:[e.jsxs(m,{children:[e.jsx(V,{type:"text",placeholder:"Логін","aria-describedby":"loginTooltip",className:`${a.login?"invalid":""}${!a.login&&x.login?"valid":""}`,...n("login")}),e.jsx(o,{id:"loginTooltip",className:`${a.login?"visible":""}`,children:a.login&&a.login.message})]}),e.jsxs(m,{children:[e.jsx(V,{type:"text",placeholder:"Пароль","aria-describedby":"passwordTooltip",className:`${a.password?"invalid":""}${!a.password&&x.password?"valid":""}`,...n("password")}),e.jsx(o,{id:"passwordTooltip",className:`${a.password?"visible":""}`,children:a.password&&a.password.message})]})]})]})]}),e.jsxs(ue,{children:[e.jsxs(re,{children:[e.jsx(je,{children:"Примітка "}),e.jsx(Ne,{type:"text",placeholder:"Примітка",...n("comment")})]}),e.jsx(M,{type:"submit",padding:"8px",text:"Додати",disabled:!l,showIcon:!1})]})]})},Ie=({onCloseModal:d,section:c})=>{const[s,t]=r.useState(c),[i,u]=r.useState(!1),[l,a]=r.useState("fop"),[n,{isLoading:x}]=be(),[E,{isLoading:w}]=ge(),[S,{isLoading:U}]=fe(),g=ve();let Q=s==="MusicEditor"?Me:l==="fop"?Ee:we;const{control:X,register:Y,handleSubmit:Z,reset:A,setValue:R,formState:{errors:k,isValid:B,dirtyFields:_}}=Ce({mode:"onChange",resolver:ye(Q)}),[D,y]=r.useState(null),[q,O]=r.useState(""),f=p=>{y(p)},z=()=>{y(null)},ee=()=>{A(),y(null)},I=()=>{d(),y(null)},ae=()=>{u(i!==!0)},se=p=>{if(Object.keys(p).forEach(N=>{R(N,p[N].trim())}),console.log("data :>> ",p),s==="MusicEditor"){const N={...p,editorRole:!0,status:!0,access:i};S(N).unwrap().then(()=>{g("/admin/users/editors"),f("successAdd")}).catch(v=>{var b;let C=(b=v.data)==null?void 0:b.message;O(C),f("error")});return}if(l==="fop"){const N={...p,access:i,userFop:l};n(N).unwrap().then(()=>{f("successAdd"),g("/admin/users/allusers")}).catch(v=>{var b;let C=(b=v.data)==null?void 0:b.message;O(C),f("error")})}if(l==="tov"){const N={...p,access:i,userFop:l};E(N).unwrap().then(()=>{g("/admin/users/allusers"),f("successAdd")}).catch(v=>{var b;let C=(b=v.data)==null?void 0:b.message;O(C),f("error")})}},P=p=>{t(p),A()},te=()=>{a(l==="tov"?"fop":"tov"),A()};return console.log("error :>> ",k),console.log("isValid :>> ",B),e.jsxs(e.Fragment,{children:[e.jsxs(Te,{children:[e.jsxs(K,{children:[e.jsx(W,{isActive:s==="User",onClick:()=>P("User"),children:"Новий користувач"}),e.jsx(W,{isActive:s==="MusicEditor",onClick:()=>P("MusicEditor"),children:"Музичний редактор"})]}),s==="User"&&e.jsx($e,{type:"button",onClick:te,children:l==="tov"?"ТОВ":"ФОП"}),e.jsx("form",{onSubmit:Z(se),children:e.jsx(De,{control:X,handleTypeOfAccess:ae,typeOfStatus:i,register:Y,isValid:B,errors:k,activeSection:s,typeOfUser:l,dirtyFields:_,setValue:R})})]}),D==="successAdd"&&e.jsxs(L,{width:"664px",padding:"138px 138px 74px",onClose:I,showCloseButton:!0,flexDirection:"column",children:[e.jsx(G,{children:"Новий користувач успішно додан"}),e.jsxs(Fe,{children:[e.jsx(M,{type:"button",padding:"8px 37px",height:"48px",text:"Готово",showIcon:!1,onClick:I}),e.jsx(M,{type:"button",padding:"8px 44px",height:"48px",text:"Додати ще",showIcon:!1,marginleft:"31px",onClick:ee})]})]}),D==="error"&&e.jsx(L,{width:"520px",padding:"24px",onClose:z,showCloseButton:!0,children:e.jsxs(G,{children:[" ",q]})})]})},Ve=()=>{const[d,c]=r.useState(!1),[s,t]=r.useState("User"),i=Se();r.useEffect(()=>{const a=i.pathname.split("/").pop();a==="allusers"?t("User"):a==="editors"&&t("MusicEditor")},[i.pathname]);const u=()=>{c(!0),document.body.classList.add("modal-open")},l=()=>{document.body.classList.remove("modal-open"),c(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(Ue,{children:[e.jsx(Ae,{children:"Користувачі"}),e.jsx(M,{showIcon:!0,icon:`${Oe}#icon-plus`,type:"button",padding:"12px 46px",onClick:u,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"Додати користувача"}),e.jsx(Le,{})]}),e.jsxs(K,{children:[e.jsx(H,{to:"allusers",activeclassname:s==="User"?"active":"",onClick:()=>t("User"),children:"Усі користувачі"}),e.jsx(H,{to:"editors",activeclassname:s==="MusicEditor"?"active":"",onClick:()=>{t("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),e.jsx(Re,{}),d&&e.jsx(L,{width:"898px",padding:"24px",onClose:l,showCloseButton:!0,children:e.jsx(Ie,{onCloseModal:l,section:s})})]})};export{Ve as default};
