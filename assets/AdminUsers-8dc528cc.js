import{j as e,F as ae,G as m,H as p,I as h,J as o,K as se,N as $,O as C,P as y,Q as te,U as ce,V as ie,W as le,X as k,Y as ne,Z as oe,_ as de,$ as me,B as F,r,a0 as xe,a1 as pe,a2 as he,a3 as ue,g as je,a4 as re,a5 as Ne,a6 as G,a7 as B,a8 as be,M as U,k as D,a9 as fe,aa as ge,ab as ve,ac as Te,ad as $e,ae as Ce,T as ye,af as Fe,ag as Me,ah as I,ai as Ee}from"./index-7620bdc1.js";const we=({register:d,errors:c,margintop:a,control:t,dirtyFields:i})=>e.jsxs(ae,{margintop:a,children:[e.jsxs(m,{children:[e.jsx(p,{children:"Контактна особа "}),e.jsx(h,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${c.contactFace?"invalid":""}${!c.contactFace&&i.contactFace?"valid":""}`,...d("contactFace")}),e.jsxs(o,{id:"contactFaceTooltip",className:`${c.contactFace?"visible":""}`,children:[" ",c.contactFace&&c.contactFace.message]})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Номер телефону "}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${c.contactFaceTelNumber?"invalid":""}${!c.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...d("contactFaceTelNumber")}),e.jsxs(o,{id:"contactFaceTelNumberTooltip",className:`${c.contactFaceTelNumber?"visible":""}`,children:[" ",c.contactFaceTelNumber&&c.contactFaceTelNumber.message]}),e.jsx("p",{})]}),e.jsxs(m,{children:[e.jsx(p,{children:"E-mail "}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${c.contactFaceEmail?"invalid":""}${!c.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...d("contactFaceEmail")}),e.jsxs(o,{id:"contactFaceEmailTooltip",className:`${c.contactFaceEmail?"visible":""}`,children:[" ",c.contactFaceEmail&&c.contactFaceEmail.message]})]})]}),Ue=({form:d,register:c,errors:a,typeOfUser:t,typeOfStatus:i,handleTypeOfAccess:u,isValid:l,activeSection:s,dirtyFields:n})=>e.jsxs(se,{children:[t==="fop"||s==="MusicEditor"?e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx(C,{children:"Прізвище"}),e.jsx(y,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${a.lastName?"invalid":""}${!a.lastName&&n.lastName?"valid":""}`,...c("lastName")}),e.jsx(o,{id:"lastNameTooltip",className:`${a.lastName?"visible":""}`,children:a.lastName&&a.lastName.message})]}),e.jsxs($,{children:[e.jsx(C,{children:"Ім'я"}),e.jsx(y,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${a.firstName?"invalid":""}${!a.firstName&&n.firstName?"valid":""}`,...c("firstName")}),e.jsx(o,{id:"firstNameTooltip",className:`${a.firstName?"visible":""}`,children:a.firstName&&a.firstName.message})]}),e.jsxs($,{children:[e.jsx(C,{children:"По-батькові"}),e.jsx(y,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${a.fatherName?"invalid":""}${!a.fatherName&&n.fatherName?"valid":""}`,...c("fatherName")}),e.jsx(o,{id:"firstNameTooltip",className:`${a.fatherName?"visible":""}`,children:a.fatherName&&a.fatherName.message})]})]}):e.jsxs($,{children:[e.jsx(C,{children:"Назва компанії"}),e.jsx(y,{type:"text",width:"100%",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${a.name?"invalid":""}${!a.name&&n.name?"valid":""}`,...c("name")})," ",e.jsx(o,{id:"firstNameTooltip",className:`${a.name?"visible":""}`,children:a.name&&a.name.message})]}),e.jsx(te,{type:"button",isTrue:i,handleTypeOfAccess:u,form:!0})]}),W=({dirtyFields:d,control:c,isValid:a,errors:t,register:i,typeOfUser:u,editor:l})=>e.jsxs(e.Fragment,{children:[!l&&e.jsxs(m,{children:[e.jsx(p,{children:"Код ЄДРПОУ (ІНН)*"}),e.jsx(h,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${t.taxCode?"invalid":""}${!t.taxCode&&d.taxCode?"valid":""}`,...i("taxCode")}),e.jsx(o,{id:"taxCodeTooltip",className:`${t.taxCode?"visible":""}`,children:t.taxCode&&t.taxCode.message})]}),!l&&e.jsxs(m,{children:[e.jsx(p,{children:"Назва закладу"}),e.jsx(h,{type:"text",placeholder:"Назва закладу","aria-describedby":"institutionTooltip",className:`${t.institution?"invalid":""}${!t.institution&&d.institution?"valid":""}`,...i("institution")}),e.jsx(o,{id:"institutionTooltip",className:`${t.institution?"visible":""}`,children:t.institution&&t.institution.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"Номер телефону*"}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${t.telNumber?"invalid":""}${!t.telNumber&&d.telNumber?"valid":""}`,...i("telNumber")}),e.jsx(o,{id:"telNumberTooltip",className:`${t.telNumber?"visible":""}`,children:t.telNumber&&t.telNumber.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"E-mail*"}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${t.email?"invalid":""}${!t.email&&d.email?"valid":""}`,...i("email")})," ",e.jsx(o,{id:"emailTooltip",className:`${t.email?"visible":""}`,children:t.email&&t.email.message})]})]}),Se=({form:d,control:c,handleTypeOfAccess:a,activeSection:t,typeOfStatus:i,typeOfUser:u,isValid:l,errors:s,register:n,dirtyFields:x})=>e.jsxs(ce,{children:[e.jsxs(ie,{children:[e.jsx(Ue,{form:d,handleTypeOfAccess:a,register:n,errors:s,typeOfUser:u,typeOfStatus:i,isValid:l,activeSection:t,dirtyFields:x}),t==="User"&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{children:[e.jsx(p,{children:"№ договору*"}),e.jsx(h,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${s.contractNumberDoc?"invalid":""}${!s.contractNumberDoc&&x.contractNumberDoc?"valid":""}`,...n("contractNumberDoc")}),e.jsx(o,{id:"contractNumberTooltip",className:`${s.contractNumberDoc?"visible":""}`,children:s.contractNumber&&s.contractNumber.message})]}),e.jsxs(m,{children:[e.jsx(p,{children:"№ договору (логін)*"}),e.jsx(h,{type:"text",placeholder:"№ договору логін","aria-describedby":"contractNumberLoginTooltip",className:`${s.contractNumber?"invalid":""}${!s.contractNumber&&x.contractNumber?"valid":""}`,...n("contractNumber")}),e.jsx(o,{id:"contractNumberTooltip",className:`${s.contractNumber?"visible":""}`,children:s.contractNumber&&s.contractNumber.message})]}),e.jsx(W,{typeOfUser:u,register:n,control:c,isValid:l,errors:s,readOnly:"false",dirtyFields:x}),e.jsxs(m,{children:[e.jsx(p,{children:"Надання доступу до"}),e.jsx(h,{type:"text",placeholder:"Надання доступу до","aria-describedby":"dateOfAccessTooltip",className:`${s.dateOfAccess?"invalid":""}${!s.dateOfAccess&&x.dateOfAccess?"valid":""}`,...n("dateOfAccess")}),e.jsx(o,{id:"dateOfAccessTooltip",className:`${s.dateOfAccess?"visible":""}`,children:s.dateOfAccess&&s.dateOfAccess.message})]}),e.jsx(we,{control:c,register:n,errors:s,margintop:"36px",isValid:l,dirtyFields:x})]}),t==="MusicEditor"&&e.jsxs(e.Fragment,{children:[e.jsx(W,{typeOfUser:"fop",register:n,control:c,isValid:l,errors:s,readOnly:"false",dirtyFields:x,editor:!0}),e.jsxs(le,{children:[e.jsxs(m,{children:[e.jsx(k,{type:"text",placeholder:"Логін","aria-describedby":"loginTooltip",className:`${s.login?"invalid":""}${!s.login&&x.login?"valid":""}`,...n("login")}),e.jsx(o,{id:"loginTooltip",className:`${s.login?"visible":""}`,children:s.login&&s.login.message})]}),e.jsxs(m,{children:[e.jsx(k,{type:"text",placeholder:"Пароль","aria-describedby":"passwordTooltip",className:`${s.password?"invalid":""}${!s.password&&x.password?"valid":""}`,...n("password")}),e.jsx(o,{id:"passwordTooltip",className:`${s.password?"visible":""}`,children:s.password&&s.password.message})]})]})]})]}),e.jsxs(ne,{children:[e.jsxs(oe,{children:[e.jsx(de,{children:"Примітка "}),e.jsx(me,{type:"text",placeholder:"Примітка",...n("comment")})]}),e.jsx(F,{type:"submit",padding:"8px",text:"Додати",disabled:!l,showIcon:!1})]})]}),Ae=({onCloseModal:d,section:c})=>{const[a,t]=r.useState(c),[i,u]=r.useState(!1),[l,s]=r.useState("fop"),[n,{isLoading:x}]=xe(),[H,{isLoading:Oe}]=pe(),[J,{isLoading:Le}]=he(),M=ue();let K=a==="MusicEditor"?ge:l==="fop"?ve:Te;const{control:P,register:Q,handleSubmit:V,reset:E,formState:{errors:S,isValid:A,dirtyFields:X}}=je({mode:"onChange",resolver:re(K)}),[O,T]=r.useState(null),[Y,w]=r.useState(""),b=N=>{T(N)},Z=()=>{T(null)},_=()=>{E(),T(null)},L=()=>{d(),T(null)},q=()=>{u(i!==!0)},z=N=>{if(a==="MusicEditor"){const f={...N,editorRole:!0,status:!0,access:i};J(f).unwrap().then(()=>{M("/admin/users/editors"),b("successAdd")}).catch(g=>{var j;let v=(j=g.data)==null?void 0:j.message;w(v),b("error")});return}if(l==="fop"){const f={...N,access:i,userFop:l};n(f).unwrap().then(()=>{b("successAdd"),M("/admin/users/allusers")}).catch(g=>{var j;let v=(j=g.data)==null?void 0:j.message;w(v),b("error")})}if(l==="tov"){const f={...N,access:i,userFop:l};H(f).unwrap().then(()=>{M("/admin/users/allusers"),b("successAdd")}).catch(g=>{var j;let v=(j=g.data)==null?void 0:j.message;w(v),b("error")})}},R=N=>{t(N),E()},ee=()=>{s(l==="tov"?"fop":"tov"),E()};return console.log("error :>> ",S),console.log("isValid :>> ",A),e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{children:[e.jsxs(G,{children:[e.jsx(B,{isActive:a==="User",onClick:()=>R("User"),children:"Новий користувач"}),e.jsx(B,{isActive:a==="MusicEditor",onClick:()=>R("MusicEditor"),children:"Музичний редактор"})]}),a==="User"&&e.jsx(be,{type:"button",onClick:ee,children:l==="tov"?"ТОВ":"ФОП"}),e.jsx("form",{onSubmit:V(z),children:e.jsx(Se,{control:P,handleTypeOfAccess:q,typeOfStatus:i,register:Q,isValid:A,errors:S,activeSection:a,typeOfUser:l,dirtyFields:X})})]}),O==="successAdd"&&e.jsxs(U,{width:"664px",padding:"138px 138px 74px",onClose:L,showCloseButton:!0,flexDirection:"column",children:[e.jsx(D,{children:"Новий користувач успішно додан"}),e.jsxs(fe,{children:[e.jsx(F,{type:"button",padding:"8px 37px",height:"48px",text:"Готово",showIcon:!1,onClick:L}),e.jsx(F,{type:"button",padding:"8px 44px",height:"48px",text:"Додати ще",showIcon:!1,marginleft:"31px",onClick:_})]})]}),O==="error"&&e.jsx(U,{width:"520px",padding:"24px",onClose:Z,showCloseButton:!0,children:e.jsxs(D,{children:[" ",Y]})})]})},ke=()=>{const[d,c]=r.useState(!1),[a,t]=r.useState("User"),i=$e();r.useEffect(()=>{const s=i.pathname.split("/").pop();s==="allusers"?t("User"):s==="editors"&&t("MusicEditor")},[i.pathname]);const u=()=>{c(!0),document.body.classList.add("modal-open")},l=()=>{document.body.classList.remove("modal-open"),c(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{children:[e.jsx(ye,{children:"Користувачі"}),e.jsx(F,{showIcon:!0,icon:`${Fe}#icon-plus`,type:"button",padding:"12px 46px",onClick:u,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"Додати користувача"}),e.jsx(Me,{})]}),e.jsxs(G,{children:[e.jsx(I,{to:"allusers",activeclassname:a==="User"?"active":"",onClick:()=>t("User"),children:"Усі користувачі"}),e.jsx(I,{to:"editors",activeclassname:a==="MusicEditor"?"active":"",onClick:()=>{t("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),e.jsx(Ee,{}),d&&e.jsx(U,{width:"898px",padding:"24px",onClose:l,showCloseButton:!0,children:e.jsx(Ae,{onCloseModal:l,section:a})})]})};export{ke as default};
