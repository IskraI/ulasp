import{j as e,R as ee,q as d,s as p,t as h,v as o,w as ae,x as T,y as C,z as y,B as se,F as te,A as ce,C as ie,D as O,G as le,H as ne,I as oe,J as de,K as $,r as j,M as me,N as xe,O as pe,P as he,g as ue,Q as je,U as Ne,V as P,W as R,X as be,Y as w,Z as L,_ as fe,$ as ve,a0 as re,a1 as ge,a2 as Te,a3 as Ce,T as ye,a4 as $e,a5 as Fe,a6 as k,a7 as Me}from"./index-c8af3b8c.js";const Ee=({register:c,errors:a,margintop:n,control:t,dirtyFields:i})=>e.jsxs(ee,{margintop:n,children:[e.jsxs(d,{children:[e.jsx(p,{children:"Контактна особа* "}),e.jsx(h,{type:"text",placeholder:"Контактна особа","aria-describedby":"contactFaceTooltip",className:`${a.contactFace?"invalid":""}${!a.contactFace&&i.contactFace?"valid":""}`,...c("contactFace")}),e.jsxs(o,{id:"contactFaceTooltip",className:`${a.contactFace?"visible":""}`,children:[" ",a.contactFace&&a.contactFace.message]})]}),e.jsxs(d,{children:[e.jsx(p,{children:"Ідентифікаційний номер* "}),e.jsx(h,{type:"text",placeholder:"Ідентифікаційний номер","aria-describedby":"contactFaceTaxCodeTooltip",className:`${a.contactFaceTaxCode?"invalid":""}${!a.contactFaceTaxCode&&i.contactFaceTaxCode?"valid":""}`,...c("contactFaceTaxCode")}),e.jsxs(o,{id:"contactFaceTaxCodeTooltip",className:`${a.contactFaceTaxCode?"visible":""}`,children:[" ",a.contactFaceTaxCode&&a.contactFaceTaxCode.message]})]}),e.jsxs(d,{children:[e.jsx(p,{children:"Номер телефону* "}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"contactFaceTelNumberTooltip",className:`${a.contactFaceTelNumber?"invalid":""}${!a.contactFaceTelNumber&&i.contactFaceTelNumber?"valid":""}`,...c("contactFaceTelNumber")}),e.jsxs(o,{id:"contactFaceTelNumberTooltip",className:`${a.contactFaceTelNumber?"visible":""}`,children:[" ",a.contactFaceTelNumber&&a.contactFaceTelNumber.message]}),e.jsx("p",{})]}),e.jsxs(d,{children:[e.jsx(p,{children:"E-mail "}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"contactFaceEmailTooltip",className:`${a.contactFaceEmail?"invalid":""}${!a.contactFaceEmail&&i.contactFaceEmail?"valid":""}`,...c("contactFaceEmail")}),e.jsxs(o,{id:"contactFaceEmailTooltip",className:`${a.contactFaceEmail?"visible":""}`,children:[" ",a.contactFaceEmail&&a.contactFaceEmail.message]})]})]}),we=({register:c,errors:a,typeOfUser:n,typeOfStatus:t,handleTypeOfStatus:i,isValid:x,activeSection:s,dirtyFields:l})=>e.jsxs(ae,{children:[n==="fop"||s==="MusicEditor"?e.jsxs(e.Fragment,{children:[e.jsxs(T,{children:[e.jsx(C,{children:"Прізвище"}),e.jsx(y,{type:"text",placeholder:"Прізвище","aria-describedby":"lastNameTooltip",className:`${a.lastName?"invalid":""}${!a.lastName&&l.lastName?"valid":""}`,...c("lastName")}),e.jsx(o,{id:"lastNameTooltip",className:`${a.lastName?"visible":""}`,children:a.lastName&&a.lastName.message})]}),e.jsxs(T,{children:[e.jsx(C,{children:"Ім'я"}),e.jsx(y,{type:"text",placeholder:"Ім'я","aria-describedby":"firstNameTooltip",className:`${a.firstName?"invalid":""}${!a.firstName&&l.firstName?"valid":""}`,...c("firstName")}),e.jsx(o,{id:"firstNameTooltip",className:`${a.firstName?"visible":""}`,children:a.firstName&&a.firstName.message})]}),e.jsxs(T,{children:[e.jsx(C,{children:"По-батькові"}),e.jsx(y,{type:"text",placeholder:"По-батькові","aria-describedby":"fatherNameTooltip",className:`${a.fatherName?"invalid":""}${!a.fatherName&&l.fatherName?"valid":""}`,...c("fatherName")}),e.jsx(o,{id:"firstNameTooltip",className:`${a.fatherName?"visible":""}`,children:a.fatherName&&a.fatherName.message})]})]}):e.jsxs(T,{children:[e.jsx(C,{children:"Назва компанії"}),e.jsx(y,{type:"text",placeholder:"Назва компанії","aria-describedby":"nameTooltip",className:`${a.name?"invalid":""}${!a.name&&l.name?"valid":""}`,...c("name")}),"  ",e.jsx(o,{id:"firstNameTooltip",className:`${a.name?"visible":""}`,children:a.name&&a.name.message})]}),e.jsx(se,{type:"button",isTrue:t,onClick:()=>i(),form:!0})]}),B=({dirtyFields:c,control:a,isValid:n,errors:t,register:i,typeOfUser:x})=>e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(p,{children:"Код ЄДРПОУ (ІНН)*"}),e.jsx(h,{type:"text",placeholder:"Код ЄДРПОУ (ІНН)","aria-describedby":"taxCodeTooltip",className:`${t.taxCode?"invalid":""}${!t.taxCode&&c.taxCode?"valid":""}`,...i("taxCode")}),e.jsx(o,{id:"taxCodeTooltip",className:`${t.taxCode?"visible":""}`,children:t.taxCode&&t.taxCode.message})]}),e.jsxs(d,{children:[e.jsx(p,{children:"Назва закладу"}),e.jsx(h,{type:"text",placeholder:"Назва закладу","aria-describedby":"institutionTooltip",className:`${t.institution?"invalid":""}${!t.institution&&c.institution?"valid":""}`,...i("institution")}),e.jsx(o,{id:"institutionTooltip",className:`${t.institution?"visible":""}`,children:t.institution&&t.institution.message})]}),e.jsxs(d,{children:[e.jsx(p,{children:"Номер телефону*"}),e.jsx(h,{type:"text",placeholder:"Номер телефону","aria-describedby":"telNumberTooltip",className:`${t.telNumber?"invalid":""}${!t.telNumber&&c.telNumber?"valid":""}`,...i("telNumber")}),e.jsx(o,{id:"telNumberTooltip",className:`${t.telNumber?"visible":""}`,children:t.telNumber&&t.telNumber.message})]}),e.jsxs(d,{children:[e.jsx(p,{children:"E-mail*"}),e.jsx(h,{type:"text",placeholder:"E-mail","aria-describedby":"emailTooltip",className:`${t.email?"invalid":""}${!t.email&&c.email?"valid":""}`,...i("email")})," ",e.jsx(o,{id:"emailTooltip",className:`${t.email?"visible":""}`,children:t.email&&t.email.message})]})]}),Ae=({control:c,handleTypeOfStatus:a,activeSection:n,typeOfStatus:t,typeOfUser:i,isValid:x,errors:s,register:l,dirtyFields:m})=>(console.log("errors",s),e.jsxs(te,{children:[e.jsxs(ce,{children:[e.jsx(we,{handleTypeOfStatus:a,register:l,errors:s,typeOfUser:i,typeOfStatus:t,isValid:x,activeSection:n,dirtyFields:m}),n==="User"&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{children:[e.jsx(p,{children:"№ договору"}),e.jsx(h,{type:"text",placeholder:"№ договору","aria-describedby":"contractNumberTooltip",className:`${s.contractNumber?"invalid":""}${!s.contractNumber&&m.contractNumber?"valid":""}`,...l("contractNumber")}),e.jsx(o,{id:"contractNumberTooltip",className:`${s.contractNumber?"visible":""}`,children:s.contractNumber&&s.contractNumber.message})]}),e.jsx(B,{typeOfUser:i,register:l,control:c,isValid:x,errors:s,readOnly:"false",dirtyFields:m}),e.jsxs(d,{children:[e.jsx(p,{children:"Надання доступу до*"}),e.jsx(h,{type:"text",placeholder:"Надання доступу до","aria-describedby":"dateOfAccessTooltip",className:`${s.dateOfAccess?"invalid":""}${!s.dateOfAccess&&m.dateOfAccess?"valid":""}`,...l("dateOfAccess")}),e.jsx(o,{id:"dateOfAccessTooltip",className:`${s.dateOfAccess?"visible":""}`,children:s.dateOfAccess&&s.dateOfAccess.message})]}),e.jsxs(d,{children:[e.jsx(p,{children:"Остання оплата* "}),e.jsx(h,{type:"text",placeholder:"Остання оплата","aria-describedby":"lastPayTooltip",className:`${s.lastPay?"invalid":""}${!s.lastPay&&m.lastPay?"valid":""}`,...l("lastPay")}),e.jsx(o,{id:"lastPayTooltip",className:`${s.lastPay?"visible":""}`,children:s.lastPay&&s.lastPay.message})]}),e.jsx(Ee,{control:c,register:l,errors:s,margintop:"36px",isValid:x,dirtyFields:m})]}),n==="MusicEditor"&&e.jsxs(e.Fragment,{children:[e.jsx(B,{typeOfUser:"fop",register:l,control:c,isValid:x,errors:s,readOnly:"false",dirtyFields:m}),e.jsxs(ie,{children:[e.jsxs(d,{children:[e.jsx(O,{type:"text",placeholder:"Логін","aria-describedby":"loginTooltip",className:`${s.login?"invalid":""}${!s.login&&m.login?"valid":""}`,...l("login")}),e.jsx(o,{id:"loginTooltip",className:`${s.login?"visible":""}`,children:s.login&&s.login.message})]}),e.jsxs(d,{children:[e.jsx(O,{type:"text",placeholder:"Пароль","aria-describedby":"passwordTooltip",className:`${s.password?"invalid":""}${!s.password&&m.password?"valid":""}`,...l("password")}),e.jsx(o,{id:"passwordTooltip",className:`${s.password?"visible":""}`,children:s.password&&s.password.message})]})]})]})]}),e.jsxs(le,{children:[e.jsxs(ne,{children:[e.jsx(oe,{children:"Примітка "}),e.jsx(de,{type:"text",placeholder:"Примітка",...l("comment")})]}),e.jsx($,{type:"submit",padding:"8px",text:"Додати",disabled:!x||m.dateOfAccess&&s.dateOfAccess,showIcon:!1})]})]})),Se=({onCloseModal:c,section:a})=>{const[n,t]=j.useState(a),[i,x]=j.useState(!1),[s,l]=j.useState("fop"),[m,{isLoading:Ue}]=me(),[I,{isLoading:Oe}]=xe(),[D,{isLoading:Re}]=pe(),F=he();let W=n==="MusicEditor"?ve:s==="fop"?re:ge;const{control:q,register:z,handleSubmit:G,reset:M,formState:{errors:H,isValid:J,dirtyFields:K}}=ue({mode:"onChange",resolver:je(W)}),[A,g]=j.useState(null),[Q,E]=j.useState(""),b=N=>{g(N)},X=()=>{g(null)},Y=()=>{M(),g(null)},S=()=>{c(),g(null)},Z=()=>{x(i!==!0)},_=N=>{if(n==="MusicEditor"){const f={...N,editorRole:!0,status:!0,access:!0};D(f).unwrap().then(()=>{F("/admin/users/editors"),b("successAdd")}).catch(v=>{var u;let r=(u=v.data)==null?void 0:u.message;E(r),b("error")});return}if(s==="fop"){const f={...N,access:i,userFop:s};console.log(f),m(f).unwrap().then(()=>{b("successAdd"),F("/admin/users/allusers")}).catch(v=>{var u;let r=(u=v.data)==null?void 0:u.message;E(r),b("error")})}if(s==="tov"){const f={...N,access:i,userFop:s};I(f).unwrap().then(()=>{F("/admin/users/allusers"),b("successAdd")}).catch(v=>{var u;let r=(u=v.data)==null?void 0:u.message;E(r),b("error")})}},U=N=>{t(N),M()},V=()=>{l(s==="tov"?"fop":"tov"),M()};return e.jsxs(e.Fragment,{children:[e.jsxs(Ne,{children:[e.jsxs(P,{children:[e.jsx(R,{isActive:n==="User",onClick:()=>U("User"),children:"Новий користувач"}),e.jsx(R,{isActive:n==="MusicEditor",onClick:()=>U("MusicEditor"),children:"Музичний редактор"})]}),n==="User"&&e.jsx(be,{type:"button",onClick:V,children:s==="tov"?"ТОВ":"ФОП"}),e.jsx("form",{onSubmit:G(_),children:e.jsx(Ae,{control:q,handleTypeOfStatus:Z,typeOfStatus:i,register:z,isValid:J,errors:H,activeSection:n,typeOfUser:s,dirtyFields:K})})]}),A==="successAdd"&&e.jsxs(w,{width:"664px",padding:"138px 138px 74px",onClose:S,showCloseButton:!0,flexDirection:"column",children:[e.jsx(L,{children:"Новий користувач успішно додан"}),e.jsxs(fe,{children:[e.jsx($,{type:"button",padding:"8px 37px",height:"48px",text:"Готово",showIcon:!1,onClick:S}),e.jsx($,{type:"button",padding:"8px 44px",height:"48px",text:"Додати ще",showIcon:!1,marginleft:"31px",onClick:Y})]})]}),A==="error"&&e.jsx(w,{width:"520px",padding:"24px",onClose:X,showCloseButton:!0,children:e.jsxs(L,{children:[" ",Q]})})]})},ke=()=>{const[c,a]=j.useState(!1),[n,t]=j.useState("User"),i=Te();j.useEffect(()=>{const l=i.pathname.split("/").pop();l==="allusers"?t("User"):l==="editors"&&t("MusicEditor")},[i.pathname]);const x=()=>{a(!0),document.body.classList.add("modal-open")},s=()=>{document.body.classList.remove("modal-open"),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs(Ce,{children:[e.jsx(ye,{children:"Користувачі"}),e.jsx($,{showIcon:!0,icon:`${$e}#icon-plus`,type:"button",padding:"12px 46px",onClick:x,marginright:"24px",marginleft:"auto",text:"Додати",ariaLabel:"Додати користувача"}),e.jsx(Fe,{})]}),e.jsxs(P,{children:[e.jsx(k,{to:"allusers",activeclassname:n==="User"?"active":"",onClick:()=>t("User"),children:"Усі користувачі"}),e.jsx(k,{to:"editors",activeclassname:n==="MusicEditor"?"active":"",onClick:()=>{t("MusicEditor")},children:"Музичні редактори та адміністратори"})]}),e.jsx(Me,{}),c&&e.jsx(w,{width:"898px",padding:"24px",onClose:s,showCloseButton:!0,children:e.jsx(Se,{onCloseModal:s,section:n})})]})};export{ke as default};
